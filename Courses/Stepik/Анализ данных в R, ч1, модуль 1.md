## Анализ данных в R
### Предобработка данных
#### Переменные
**Задачи:**  
**1:** Создайте переменную the_best_vector, в которой хранятся числа от 1 до 5000 и затем числа от 7000 до 10000.
```{r}
the_best_vector <- c(1:5000,7000:10000)
```

**2:** В уже созданной переменной my_numbers сохранен вектор из 20 целых чисел. 
Ваша задача создать новую переменную my_numbers_2, в которой будет сохранен 2, 5, 7, 9, 12, 16 и 20 элемент вектора my_numbers.
```{r}
my_numbers_2 <- my_numbers[c(2,5,7,9,12,16,20)]
```

**3:** Найдите сумму всех элементов вектора , которые больше 10. Сохраните сумму в переменную my_sum.
```{r}
my_sum<-sum(my_vector[my_vector>10])
```
**4:** В векторе  my_vector отберите только те наблюдения, которые отклоняются от среднего меньше чем на одно стандартное отклонение. 
Сохраните эти наблюдения в новую переменную my_vector_2.
```{r}
my_sum<-sum(my_vector[my_vector>10])
```

**5:** В векторе  my_vector отберите только те наблюдения, которые отклоняются от среднего меньше чем на одно стандартное отклонение. 
Сохраните эти наблюдения в новую переменную my_vector_2. 
```{r}
my_vector_2 <- my_vector[my_vector < mean(my_vector) + sd(my_vector) & my_vector > mean(my_vector) - sd(my_vector)]
```
#### Работа с data frame
**Задачи:**  
**1:** В датафрэйме mtcars создайте новую колонку (переменную) под названием even_gear, в которой будут единицы, если значение переменной (gear) четное, и нули если количество нечетное.
```{r}
mtcars$even_gear <- ifelse (mtcars$gear %% 2 == 1, 0, 1 )
```

**2:** Cоздать переменную - вектор mpg_4 и сохранить в нее значения расхода топлива (mpg) для машин с четырьмя цилиндрами (cyl). 
```{r}
 mpg_4 <-mtcars$mpg[mtcars$cyl==4]
 ```
**3:** Cоздать новый dataframe под названием mini_mtcars, в котором будут сохранены только третья, седьмая, десятая, двенадцатая и последняя строчка датафрейма mtcars.
```{r}
mini_mtcars <- mtcars[c(3,7,10,12,nrow(mtcars)),]
 ```
 
 #### Описательные статистики
 
 median() - медиана
 mean() - среднее
 sd() - стандартное отклонение
 range() - размах
 
 aggregate() разбивает данные на сабсеты, вычисляет summary (library: stats)
>Пример (mtcars):  
aggregate(x=df$hp, by = list(df$vs),FUN=mean) - выводит среднее hp, группируя по vs  
или:  
aggregate(hp~vs,df,mean)
 
 describe() выдает stat summary для каждоый переменной построчно.  
 decribeBy() - описательные статистики для группы (library:psych)
 
 >Пример (mtcars):  
decribe(x=df)  
decribeBy(x=df[,-с(8,9)], group=df$vs, mat=T, digits=1) #mat - для переведения данных в таблицу, digits - знаки после запятой
 
 **Задачи:**  
**1:** Рассчитайте среднее значение времени разгона (qsec) для автомобилей, число цилиндров (cyl) у которых не равняется 3 и показатель количества миль на галлон топлива (mpg) больше 20.
```{r}
result <- mean(mtcars$qsec[mtcars$cyl!=3 & mtcars$mpg>20])
```
**2:** При помощи функции aggregate рассчитайте стандартное отклонение переменной hp (лошадиные силы) и переменной disp (вместимости двигателя)  у машин с автоматической и ручной коробкой передач. 
```{r}
descriptions_stat <- aggregate(x=mtcars[,c(3,4)], by=list(mtcars$am), FUN=sd)
```
**3:** Воспользуемся встроенными данными airquality. В новую переменную сохраните subset исходных данных, оставив наблюдения только для месяцев 7, 8 и 9.
При помощи функции aggregate рассчитайте количество непропущенных наблюдений по переменной Ozone в 7, 8 и 9 месяце. Для определения количества наблюдений используйте функцию length().
```{r}
air <- subset(airquality, Month %in% c(7,8,9))
result <- aggregate(air$Ozone ~ Month, air, length)
```
**4:** В переменной my_vector сохранен вектор с пропущенными значениями. Вам нужно создать новый вектор fixed_vector, в котором все пропущенные значения вектора my_vector будут заменены на среднее значение по имеющимся наблюдениям. При этом исходный вектор оставьте без изменений!
```{r}
m <- mean(my_vector, na.rm = T)
fixed_vector <- my_vector
fixed_vector[is.na(fixed_vector)] <- m
```

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
